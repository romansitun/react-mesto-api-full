{"ast":null,"code":"class Api {\n  constructor(data) {\n    this._baseUrl = data.serverUrl;\n    this._token = data.token;\n  }\n\n  _handleResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()]);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'GET',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}cards`, {\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  editProfile(data) {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.firstname,\n        about: data.info\n      })\n    }).then(res => this._handleResponse(res));\n  }\n\n  addNewCard(data) {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    }).then(res => this._handleResponse(res));\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}cards/${id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  addCardLike(data) {\n    return fetch(`${this._baseUrl}cards/${data}/likes`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  deleteCardLike(data) {\n    return fetch(`${this._baseUrl}cards/${data}/likes`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  editAvatar(data) {\n    return fetch(`${this._baseUrl}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: data.link\n      })\n    }).then(res => this._handleResponse(res));\n  }\n\n  changeLikeCardStatus(data, isLiked) {\n    return fetch(`${this._baseUrl}cards/${data}/likes`, {\n      method: !isLiked ? 'DELETE' : 'PUT',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n}\n\nconst api = new Api({\n  serverUrl: 'https://mesto.nomoreparties.co/v1/cohort-42/',\n  token: 'da2b0bcf-d08e-4c4f-a5b5-5131bea0378d'\n});\nexport default api;","map":{"version":3,"names":["Api","constructor","data","_baseUrl","serverUrl","_token","token","_handleResponse","res","ok","json","Promise","reject","status","getInitialData","all","getUserInfo","getInitialCards","fetch","method","headers","authorization","then","editProfile","body","JSON","stringify","name","firstname","about","info","addNewCard","link","deleteCard","id","addCardLike","deleteCardLike","editAvatar","avatar","changeLikeCardStatus","isLiked","api"],"sources":["C:/Users/Роман/mesto-react/src/utils/Api.js"],"sourcesContent":["class Api {\r\n    constructor(data) {\r\n        this._baseUrl = data.serverUrl;\r\n        this._token = data.token;\r\n    }\r\n\r\n    _handleResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        } else {\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        }\r\n    }\r\n\r\n    getInitialData() {\r\n        return Promise.all([this.getUserInfo(), this.getInitialCards()])\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this._baseUrl}users/me`, {\r\n            method: 'GET',\r\n            headers: {\r\n                authorization: this._token,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    getInitialCards() {\r\n        return fetch(`${this._baseUrl}cards`, {\r\n            headers: {\r\n                authorization: this._token,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    editProfile(data) {\r\n        return fetch(`${this._baseUrl}users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: this._token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: data.firstname,\r\n                about: data.info,\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    addNewCard(data) {\r\n        return fetch(`${this._baseUrl}cards`, {\r\n            method: 'POST',\r\n            headers: {\r\n                authorization: this._token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link,\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    deleteCard(id) {\r\n        return fetch(`${this._baseUrl}cards/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                authorization: this._token,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    addCardLike(data) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                authorization: this._token,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    deleteCardLike(data) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                authorization: this._token,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    editAvatar(data) {\r\n        return fetch(`${this._baseUrl}users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: this._token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                avatar: data.link,\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    changeLikeCardStatus(data, isLiked) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: !isLiked ? 'DELETE' : 'PUT',\r\n            headers: {\r\n                authorization: this._token,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n}\r\n\r\n\r\nconst api = new Api({\r\n    serverUrl: 'https://mesto.nomoreparties.co/v1/cohort-42/',\r\n    token: 'da2b0bcf-d08e-4c4f-a5b5-5131bea0378d',\r\n});\r\n\r\nexport default api;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}