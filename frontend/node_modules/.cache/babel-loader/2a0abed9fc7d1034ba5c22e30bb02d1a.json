{"ast":null,"code":"import _classCallCheck from\"C:/Users/\\u0420\\u043E\\u043C\\u0430\\u043D/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u0420\\u043E\\u043C\\u0430\\u043D/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(data){_classCallCheck(this,Api);this._baseUrl=data.serverUrl;}_createClass(Api,[{key:\"_handleResponse\",value:function _handleResponse(res){if(res.ok){return res.json();}else{return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}}},{key:\"getInitialData\",value:function getInitialData(){return Promise.all([this.getUserInfo(),this.getInitialCards()]);}},{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(\"\".concat(this._baseUrl,\"users/me\"),{method:'GET',credentials:'include',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){return _this._handleResponse(res);});}},{key:\"getInitialCards\",value:function getInitialCards(jwt){var _this2=this;return fetch(\"\".concat(this._baseUrl,\"cards\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(jwt)},method:'GET'}).then(function(res){return _this2._handleResponse(res);});}},{key:\"editProfile\",value:function editProfile(_ref,jwt){var _this3=this;var name=_ref.name,about=_ref.about;return fetch(\"\".concat(this._baseUrl,\"users/me\"),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(jwt)},body:JSON.stringify({name:name,about:about})}).then(function(res){return _this3._handleResponse(res);});}},{key:\"editAvatar\",value:function editAvatar(_ref2,jwt){var _this4=this;var avatar=_ref2.avatar;return fetch(\"\".concat(this._baseUrl,\"users/me/avatar\"),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(jwt)},body:JSON.stringify({avatar:avatar})}).then(function(res){return _this4._handleResponse(res);});}},{key:\"addNewCard\",value:function addNewCard(card){var _this5=this;return fetch(\"\".concat(this._baseUrl,\"cards\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('jwt'))},body:JSON.stringify({name:card.name,link:card.link})}).then(function(res){return _this5._handleResponse(res);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this6=this;return fetch(\"\".concat(this._baseUrl,\"cards/\").concat(cardId),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){return _this6._handleResponse(res);});}},{key:\"addCardLike\",value:function addCardLike(data){var _this7=this;return fetch(\"\".concat(this._baseUrl,\"cards/\").concat(data,\"/likes\"),{method:'PUT',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){return _this7._handleResponse(res);});}},{key:\"deleteCardLike\",value:function deleteCardLike(data){var _this8=this;return fetch(\"\".concat(this._baseUrl,\"cards/\").concat(data,\"/likes\"),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){return _this8._handleResponse(res);});}// changeLikeCardStatus(data, isLiked) {\n//     return fetch(`${this._baseUrl}cards/${data}/likes`, {\n//         method: !isLiked ? 'DELETE' : 'PUT',\n//         headers: {\n//             'Content-Type': 'application/json',\n//             'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n//         }\n//     })\n//         .then((res) => this._handleResponse(res))\n// }\n// like/dislike\n},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){var _this9=this;return fetch(\"\".concat(this._baseUrl,\"cards/\").concat(cardId,\"/likes\"),{method:\"\".concat(!isLiked?'DELETE':'PUT'),headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){return _this9._handleResponse(res);});}}]);return Api;}();var api=new Api({serverUrl:'http://api.situnmesto.students.nomoredomains.sbs/',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('jwt'))}});export default api;","map":{"version":3,"names":["Api","data","_baseUrl","serverUrl","res","ok","json","Promise","reject","status","all","getUserInfo","getInitialCards","fetch","method","credentials","headers","localStorage","getItem","then","_handleResponse","jwt","name","about","body","JSON","stringify","avatar","card","link","cardId","isLiked","api"],"sources":["C:/Users/Роман/react-mesto-auth/src/utils/Api.js"],"sourcesContent":["class Api {\r\n    constructor(data) {\r\n        this._baseUrl = data.serverUrl;\r\n    }\r\n\r\n    _handleResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        } else {\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        }\r\n    }\r\n\r\n    getInitialData() {\r\n        return Promise.all([this.getUserInfo(), this.getInitialCards()])\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this._baseUrl}users/me`, {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            },\r\n        })\r\n            .then((res) => this._handleResponse(res)\r\n            )\r\n\r\n    }\r\n\r\n    getInitialCards(jwt) {\r\n        return fetch(`${this._baseUrl}cards`, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${jwt}`,\r\n            },\r\n            method: 'GET',\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n\r\n\r\n    editProfile({ name, about }, jwt) {\r\n\r\n        return fetch(`${this._baseUrl}users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${jwt}`,\r\n            },\r\n            body: JSON.stringify({\r\n                name, about\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res));\r\n    }\r\n\r\n\r\n\r\n    editAvatar({ avatar }, jwt) {\r\n        return fetch(`${this._baseUrl}users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${jwt}`,\r\n            },\r\n            body: JSON.stringify({\r\n                avatar,\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    addNewCard(card) {\r\n        return fetch(`${this._baseUrl}cards`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            },\r\n            body: JSON.stringify({\r\n                name: card.name,\r\n                link: card.link,\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        return fetch(`${this._baseUrl}cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    addCardLike(data) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    deleteCardLike(data) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n\r\n    // changeLikeCardStatus(data, isLiked) {\r\n    //     return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n    //         method: !isLiked ? 'DELETE' : 'PUT',\r\n    //         headers: {\r\n    //             'Content-Type': 'application/json',\r\n    //             'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n    //         }\r\n    //     })\r\n    //         .then((res) => this._handleResponse(res))\r\n    // }\r\n\r\n    // like/dislike\r\n    changeLikeCardStatus(cardId, isLiked) {\r\n        return fetch(`${this._baseUrl}cards/${cardId}/likes`, {\r\n            method: `${!isLiked ? 'DELETE' : 'PUT'}`,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            },\r\n        }).then((res) => this._handleResponse(res));\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst api = new Api({\r\n    serverUrl: 'http://api.situnmesto.students.nomoredomains.sbs/',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n    },\r\n});\r\n\r\nexport default api;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}