{"ast":null,"code":"class Api {\n  constructor(data) {\n    this._baseUrl = data.serverUrl;\n  }\n\n  _handleResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()]);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  getInitialCards(jwt) {\n    return fetch(`${this._baseUrl}cards`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${jwt}`\n      },\n      method: 'GET'\n    }).then(res => this._handleResponse(res));\n  }\n\n  editProfile(_ref, jwt) {\n    let {\n      name,\n      about\n    } = _ref;\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${jwt}`\n      },\n      body: JSON.stringify({\n        name,\n        about\n      })\n    }).then(res => this._handleResponse(res));\n  }\n\n  editAvatar(_ref2, jwt) {\n    let {\n      avatar\n    } = _ref2;\n    // <-- изменил тут\n    return fetch(`${this._baseUrl}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${jwt}`\n      },\n      body: JSON.stringify({\n        avatar // <-- изменил здесь\n\n      })\n    }).then(res => this._handleResponse(res));\n  }\n\n  addNewCard(card) {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`\n      },\n      body: JSON.stringify({\n        name: card.name,\n        link: card.link\n      })\n    }).then(res => this._handleResponse(res));\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  addCardLike(data) {\n    return fetch(`${this._baseUrl}cards/${data}/likes`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  deleteCardLike(data) {\n    return fetch(`${this._baseUrl}cards/${data}/likes`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n  changeLikeCardStatus(data, isLiked) {\n    return fetch(`${this._baseUrl}cards/${data}/likes`, {\n      method: !isLiked ? 'DELETE' : 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`\n      }\n    }).then(res => this._handleResponse(res));\n  }\n\n}\n\nconst api = new Api({\n  serverUrl: 'http://localhost:3000/',\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${localStorage.getItem('jwt')}`\n  }\n});\nexport default api;","map":{"version":3,"names":["Api","constructor","data","_baseUrl","serverUrl","_handleResponse","res","ok","json","Promise","reject","status","getInitialData","all","getUserInfo","getInitialCards","fetch","method","credentials","headers","localStorage","getItem","then","jwt","editProfile","name","about","body","JSON","stringify","editAvatar","avatar","addNewCard","card","link","deleteCard","cardId","addCardLike","deleteCardLike","changeLikeCardStatus","isLiked","api"],"sources":["C:/Users/Роман/react-mesto-auth/src/utils/Api.js"],"sourcesContent":["class Api {\r\n    constructor(data) {\r\n        this._baseUrl = data.serverUrl;\r\n    }\r\n\r\n    _handleResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        } else {\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        }\r\n    }\r\n\r\n    getInitialData() {\r\n        return Promise.all([this.getUserInfo(), this.getInitialCards()])\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this._baseUrl}users/me`, {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            },\r\n        })\r\n            .then((res) => this._handleResponse(res)\r\n            )\r\n\r\n    }\r\n\r\n    getInitialCards(jwt) {\r\n        return fetch(`${this._baseUrl}cards`, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${jwt}`,\r\n            },\r\n            method: 'GET',\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    editProfile({ name, about }, jwt) {\r\n        return fetch(`${this._baseUrl}users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${jwt}`,\r\n            },\r\n            body: JSON.stringify({\r\n                name, about\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res));\r\n    }\r\n\r\n    editAvatar({ avatar }, jwt) { // <-- изменил тут\r\n        return fetch(`${this._baseUrl}users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${jwt}`,\r\n            },\r\n            body: JSON.stringify({\r\n                avatar, // <-- изменил здесь\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    addNewCard(card) {\r\n        return fetch(`${this._baseUrl}cards`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            },\r\n            body: JSON.stringify({\r\n                name: card.name,\r\n                link: card.link,\r\n            })\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        return fetch(`${this._baseUrl}cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    addCardLike(data) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n    deleteCardLike(data) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n\r\n\r\n    changeLikeCardStatus(data, isLiked) {\r\n        return fetch(`${this._baseUrl}cards/${data}/likes`, {\r\n            method: !isLiked ? 'DELETE' : 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        })\r\n            .then((res) => this._handleResponse(res))\r\n    }\r\n}\r\n\r\n\r\nconst api = new Api({\r\n    serverUrl: 'http://localhost:3000/',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n    },\r\n});\r\n\r\nexport default api;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}